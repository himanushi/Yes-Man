最小限の入力から最適な /specify コマンド用仕様を自動生成します。

これは仕様駆動開発ライフサイクルの準備段階（ステップ0）です。

開発者の簡潔な入力から、必要な詳細を推測・補完して完全な仕様を作成します。

## 実行フロー

### ステップ1: 初期入力（必須）
```
何を作りたいか、一言で教えてください：
（例：「Slackの通知を管理するツール」「CSVデータの可視化ダッシュボード」）
```

### ステップ2: 自動分析と推測
入力を受けて、以下を自動的に推測・提案します：

```
「[入力内容]」を分析しました。

以下の仕様を推測しました：

【推測される用途】
[一般的なユースケースから推測]

【想定ユーザー】
- メインユーザー：[推測]
- サブユーザー：[推測]

【コア機能（MVP）】
1. [必須機能1]
2. [必須機能2]
3. [必須機能3]

【標準的な要件】
- [この種のシステムで一般的な要件1]
- [この種のシステムで一般的な要件2]

---
これでOKなら Enter、修正があれば該当箇所だけ教えてください：
（例：「ユーザーは社内のみ」「機能2は不要」「リアルタイム更新必須」）
```

### ステップ3: 最小限の確認（オプション）
ユーザーが修正を入力した場合のみ：

```
修正を反映しました。

追加で確認が必要な点：
□ [重要な確認事項1] → デフォルト: [一般的な選択]
□ [重要な確認事項2] → デフォルト: [一般的な選択]

デフォルトでOKなら Enter、変更があれば番号と内容を：
（例：「1: 100人規模」）
```

### ステップ4: 仕様の自動生成
```
仕様を生成しました：

---

/specify [機能名]: [自動生成された簡潔な説明]

【ユーザーストーリー】
- As a [メインユーザー], I want [主要目的], so that [主要価値]
- As a [サブユーザー], I want [副次目的], so that [副次価値]

【主要機能】
1. [機能1 - 具体的な動作を含む説明]
2. [機能2 - 具体的な動作を含む説明]
3. [機能3 - 具体的な動作を含む説明]

【受入基準】
- [自動生成された測定可能な基準1]
- [自動生成された測定可能な基準2]
- [自動生成された測定可能な基準3]

【スコープ】
含む：[MVPに必要な最小限]
含まない：[v2以降に回せるもの]

【前提条件】
- [一般的な前提1]
- [一般的な前提2]

【想定規模】
- ユーザー数：[デフォルト値]
- データ量：[デフォルト値]
- 利用頻度：[デフォルト値]

---

このまま使用: Enter
全体を編集: 'edit'
特定項目を修正: '項目名: 新しい内容'
```

## 推測ルール（内部ロジック）

### パターン認識
入力から以下のパターンを認識し、適切なテンプレートを適用：

1. **管理系** (「管理」「tracking」「monitor」を含む)
   - CRUD機能
   - 一覧表示とフィルタ
   - ステータス管理
   - 通知機能

2. **可視化系** (「ダッシュボード」「分析」「レポート」を含む)
   - データ取り込み
   - 集計・グラフ表示
   - 期間指定
   - エクスポート機能

3. **自動化系** (「自動」「bot」「定期」を含む)
   - トリガー設定
   - 実行ログ
   - エラー通知
   - スケジュール管理

4. **連携系** (「API」「連携」「sync」を含む)
   - 認証設定
   - データマッピング
   - 同期状態管理
   - エラーリトライ

### デフォルト値の設定

| 項目 | デフォルト値 | 理由 |
|------|------------|------|
| ユーザー数 | 10-50人 | 小規模チーム想定 |
| データ量 | 1万件以下 | 初期段階想定 |
| 利用頻度 | 日次 | 業務ツール想定 |
| 応答時間 | 3秒以内 | 一般的なUX基準 |
| 可用性 | 営業時間内 | 24/365は過剰 |
| セキュリティ | 社内認証 | 最も一般的 |

### 自動補完ルール

1. **機能名が不明確な場合**
   - 動詞を追加（例：「在庫」→「在庫管理システム」）
   - 用途を明確化（例：「通知」→「通知配信管理ツール」）

2. **ユーザーが不明な場合**
   - 機能から推測（管理系→管理者+一般ユーザー）
   - 規模から推測（小規模→チーム内利用）

3. **要件が不足している場合**
   - 同種システムの一般要件を追加
   - 業界標準のベストプラクティスを適用

## 効率化のポイント

1. **Enter連打で完成**
   - デフォルトが妥当なら、Enterキーだけで仕様完成
   - 一般的なケースを想定した賢いデフォルト

2. **差分入力のみ**
   - 「違う部分だけ」を指摘すればOK
   - 例：「ユーザーは1000人」「認証は不要」

3. **パターンマッチング**
   - よくあるシステムは自動認識
   - 業界標準の機能セットを自動提案

4. **過不足ない仕様**
   - MVPに必要十分な機能に絞る
   - 将来拡張は「含まない」に自動分類

## 使用例

### 最速パターン（Enter 2回）
```
User: /pre-specify
AI: 何を作りたいか、一言で教えてください：
User: タスク管理
AI: [自動生成された仕様を表示]
User: [Enter]
AI: 完成！この仕様で /specify を実行してください
```

### 微調整パターン（入力3回）
```
User: /pre-specify  
AI: 何を作りたいか、一言で教えてください：
User: 社内FAQ検索
AI: [推測された仕様を表示] これでOKなら Enter、修正があれば該当箇所だけ：
User: ユーザーは全社員1万人、検索速度重視
AI: [修正された仕様を表示]
User: [Enter]
```

## 注意事項

- 技術的実装（言語、DB、フレームワーク）は生成しない
- 明らかに過剰な要件は自動的に v2 送り
- 矛盾する要件は自動調整して警告
- セキュリティ/コンプライアンス要件は保守的に設定